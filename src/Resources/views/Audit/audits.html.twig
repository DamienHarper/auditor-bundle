{% extends "@DHAuditor/layout.html.twig" %}

{% import '@DHAuditor/Audit/helpers/helper.html.twig' as helper %}

{% block dh_auditor_content %}
    <div class="mb-8">
        <h1 class="text-xl font-semibold text-slate-900 dark:text-slate-100">
            {% trans from 'auditor' %}audit.home.title{% endtrans %}
        </h1>
        <p class="text-sm text-slate-500 dark:text-slate-400">
            {% trans from 'auditor' %}audit.home.subtitle{% endtrans %}
        </p>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
        {% for entity, entityAuditData in audited %}
            <a href="{{ path('dh_auditor_show_entity_stream', {'entity': helper.namespaceToParam(entity)}) }}"
               class="rounded-xl border bg-white border-slate-200 p-4
                      hover:bg-slate-50 hover:border-slate-300 transition
                      dark:bg-slate-900 dark:border-slate-800 dark:hover:bg-slate-800">
                <div class="flex justify-between">
                    <span class="font-medium" title="{{ entity|e('html_attr') }}">{{ entity|split('\\')|last }}</span>
                    <span class="text-xs text-slate-500 dark:text-slate-400 my-auto">
                        {% trans with { '%count%': entityAuditData.count|number_format } from 'auditor' %}audit.audit_details.events_count{% endtrans %}
                    </span>
                </div>
                <div class="text-xs text-slate-500 dark:text-slate-400 mt-1">
                    {% trans from 'auditor' %}audit.audit_details.last_activity{% endtrans %} · {{ entityAuditData.latest.type|upper }} · {{ entityAuditData.latest.createdAt|time_ago }}
                </div>
            </a>
        {% else %}
            <div class="col-span-full text-center text-slate-500 dark:text-slate-400 py-8">
                {% trans from 'auditor' %}audit.home.no_audits{% endtrans %}
            </div>
        {% endfor %}
    </div>
{% endblock dh_auditor_content %}
